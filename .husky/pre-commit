
echo "ğŸ›¡ï¸  VioletVault Pre-commit Quality Gate"

# 1. Run lint-staged for fast, file-level formatting and linting
echo "ğŸ” Running lint-staged..."
npx lint-staged || exit 1

# 2. Run project-wide type check (required for TS consistency)
echo "ğŸ” Running project-wide type check..."
npm run typecheck || exit 1

# 3. Run a smoke test (build) to ensure no regressions
echo "ğŸ—ï¸  Verifying build status..."
npm run build || exit 1

# 4. Auto-bump alpha version
echo "ğŸ”– Auto-bumping alpha version..."
npm version prerelease --preid=alpha --no-git-tag-version
git add package.json

echo "âœ… Quality checks passed! Proceeding with commit."
