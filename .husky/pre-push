echo "ðŸ” Running ESLint check before push..."
npx eslint . --config configs/linting/eslint.config.js --max-warnings 25 --cache --cache-location .eslintcache

if [ $? -ne 0 ]; then
  echo "âŒ ESLint check failed! Push aborted."
  echo "ðŸ”§ Run: npm run lint:fix to auto-fix some issues"
  exit 1
fi

echo "âœ… ESLint passed!"

echo "ðŸ” Running TypeScript type check before push..."
TYPECHECK_OUTPUT=$(npx tsc --noEmit 2>&1)
ERROR_COUNT=$(echo "$TYPECHECK_OUTPUT" | grep -c "error TS" || echo "0")
ERROR_THRESHOLD=250

if [ "$ERROR_COUNT" -gt "$ERROR_THRESHOLD" ]; then
  echo "âŒ TypeScript errors exceed threshold! ($ERROR_COUNT > $ERROR_THRESHOLD)"
  echo "ðŸ“Š Current errors: $ERROR_COUNT"
  echo "ðŸ“ˆ Threshold: $ERROR_THRESHOLD"
  echo "ðŸ”§ Run: npm run typecheck to see all errors"
  exit 1
fi

echo "âœ… TypeScript check passed! ($ERROR_COUNT/$ERROR_THRESHOLD errors)"
echo "âœ… All checks passed! Push proceeding..."
